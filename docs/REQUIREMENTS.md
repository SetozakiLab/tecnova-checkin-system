# tec-nova 入退場管理システム 要件定義書

**最終更新日:** 2025-07-03

---

## 1. アプリ概要

### 1.1. アプリ名

- tec-nova 入退場管理システム

### 1.2. コンセプト

- ゲスト（子供）が会場に来場および退場した際の入場案内および、施設管理者（メンター）がリアルタイムで会場に誰が来ているのかを把握することを容易にする．
- tec-nova とは小学生から高校生向けの創造的活動を促すいわば Fab Lab 空間を提供しており，主にプログラミングやモデリングなどのクリエイティブ活動ができる設備および TA を配置している．

### 1.3. 開発の目的・背景（なぜ作るのか？）

- メンターの負担軽減
  - 従来は入場受付および子供の活動ログをメンターがマニュアル的に行なっていた
    - 端末での案内と登録またはログインをセットにすることで負担軽減
  - アクティブなゲストをシステム上で確認できることで活動ログのゲストの識別を楽にする
    - 入場システム完成後に活動ログシステムを開発し連携する予定
- 情報の電子化による将来性
  - ゲストの情報を ID で紐づけることでさまざまなシステムに活用可能

### 1.4. ターゲットユーザー（誰が使うのか？）

- ゲスト（子供）
  - 会場の参加登録およびログイン
  - 施設利用の同意および案内
- 管理者（メンター）
  - リアルタイムの参加者状況確認
  - 入退場の情報集計

### 1.5. 解決したい課題・ゴール

- 課題：メンターが雑務により TA 業務に専念できない・紙媒体での情報管理
- ゴール：メンターの負担軽減および情報のペーパーレス化・リアルタイム監視

---

## 2. 機能要件

### 2.1. 機能一覧 (MVP: Minimum Viable Product)

- **ゲスト向け機能（受付端末）**
  - [ ] **新規ゲスト登録機能**: 初めて利用するゲストが名前や連絡先などを登録する。
  - [ ] **利用規約同意機能**: 登録時に利用規約を表示し、同意を得る。
  - [ ] **入退場（チェックイン/アウト）機能**:
    - ID や名前でゲストを検索し、簡単な操作（ボタンタップなど）で入退場を記録する。
    - チェックイン時に「ようこそ！」、チェックアウト時に「またね！」のようなメッセージを表示する。
- **管理者向け機能（メンター用 PC/タブレット）**
  - [ ] **管理者ログイン機能**: パスワードで保護された管理者ページにログインする。
  - [ ] **リアルタイム滞在者一覧（ダッシュボード）**:
    - 現在施設内にいるゲストの名前、入室時刻を一覧で表示する。
    - 滞在人数をリアルタイムでカウント表示する。
    - 一覧は自動的に更新される。
  - [ ] **入退場履歴の確認・検索機能**:
    - 過去の入退場記録を日付やゲスト名で検索・閲覧できる。
  - [ ] **ゲスト情報管理機能**:
    - 登録されているゲスト情報（名前など）を編集・削除できる。

### 2.2. 【将来的に実装したい機能】

- [ ] **活動ログシステムとの連携**: 誰が・いつ・何をしたかを記録する別システムと連携する。
- [ ] **QR コードによる入退場**: 各ゲストにユニークな QR コードを発行し、それを読み取るだけでチェックイン/アウトできるようにする。
- [ ] **統計データのエクスポート機能**: 月次レポートなどのため、入退場履歴を CSV 形式でダウンロードできるようにする。
- [ ] **保護者への通知機能**: ゲストが入退場した際に、登録された保護者のメールアドレス等へ通知する機能。

### 2.3. 画面一覧・画面遷移

- **ゲスト向け画面**

  1.  **トップ画面**: 「はじめての方（新規登録）」「メンバーの方（入退場）」の選択ボタンを配置。
  2.  **新規登録画面**
  3.  **利用規約同意画面**
  4.  **入退場画面**: ゲストを検索し、チェックイン/アウトボタンを表示。
  5.  **完了画面**: (入室/退室完了メッセージ)

- **管理者向け画面**

  1.  **管理者ログイン画面**
  2.  **ダッシュボード画面 (リアルタイム滞在者一覧)**
  3.  **入退場履歴画面**
  4.  **ゲスト管理画面**

- **画面遷移図 (簡易`)**
  ```mermaid
  graph TD
      subgraph ゲスト画面
          A[トップ画面] --> B[新規登録];
          A --> C[入退場画面];
          B --> C;
          C --> D[完了画面];
      end
      subgraph 管理者画面
          E[ログイン画面] --> F[ダッシュボード];
          F --> G[入退場履歴];
          F --> H[ゲスト管理];
      end
  ```

### 2.4. 主なデータ (テーブル設計)

まだ

---

## 3. 非機能要件

- **対応環境**:
  - **ゲスト受付端末**: Web ブラウザが動作するタブレットまたは PC。
  - **管理者端末**: Web ブラウザが動作する PC またはタブレット。
- **パフォーマンス**:
  - ゲストの入退場処理は  **2 秒以内**  に完了すること。
  - 管理者ダッシュボードの滞在者一覧は  **5 秒間隔**  で自動更新すること。
- **セキュリティ**:
  - メンターのパスワードは  **ハッシュ化**  してデータベースに保存する。
  - 管理者ページは必ずログインを要求し、セッション管理を適切に行う。
- **UI/UX**:
  - **ゲスト向け画面**: 子供が一人でも操作できるよう、大きなボタンと分かりやすい日本語で構成する。文字入力は最小限にする。
  - **管理者向け画面**: 必要な情報（誰がいるか、何人いるか）が一目でわかる視認性の高いデザインにする。

---

## 4. 開発計画

- **開発スコープ**:
  - まずは  **2.1. 機能一覧 (MVP)**  に記載された機能の実装を最優先とする。
- **使用技術スタック**:
  - フロントエンド/バックエンド: **Next.js (App Router)**
  - ORM: **Prisma**
  - データベース: **PostgreSQL**
  - インフラ: **自前サーバー (Linux/Docker)**
  - その他: **GitHub**  でのソースコード管理

---

## 5. その他・メモ

- 初回リリースでは、ゲストのユニーク ID は新規登録時に自動採番するシンプルな仕様を想定。
- 将来的な QR コード対応を見据え、ゲスト ID の設計には拡張性を持たせる。
- エラーハンドリング（DB 接続エラー、重複登録など）を考慮する必要がある。
